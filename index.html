<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OMNISPEC - Technical Color Blueprint</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F8F9FA; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Smooth transitions */
        .smooth-transition { transition: all 0.6s cubic-bezier(0.22, 1, 0.36, 1); }
        
        /* Grid background */
        .bg-grid {
            background-size: 40px 40px;
            background-image: 
                linear-gradient(to right, rgba(0,0,0,0.05) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(0,0,0,0.05) 1px, transparent 1px);
        }

        /* Technical Header styling */
        .technical-header {
            position: relative;
            display: inline-block;
        }
        .technical-header::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 40px;
            height: 2px;
            background: #000;
        }
        
        /* Wheel Segment Hover Interaction */
        .wheel-segment {
            transition: opacity 0.2s, transform 0.2s;
            transform-origin: center;
            cursor: pointer;
        }
        .wheel-segment:hover {
            opacity: 0.9;
            transform: scale(1.05);
            stroke: white;
            stroke-width: 2px;
        }
    </style>
</head>
<body class="text-gray-900 min-h-screen overflow-x-hidden bg-grid transition-colors duration-1000" id="main-viewport">

    <!-- MAIN CONTAINER -->
    <div class="relative min-h-screen flex flex-col md:flex-row max-w-7xl mx-auto">

        <!-- LEFT PANEL: VISUAL ANCHOR & SEARCH -->
        <div class="w-full md:w-5/12 lg:w-4/12 flex flex-col items-center justify-start pt-20 pb-10 relative z-20 md:fixed md:h-screen md:top-0 md:left-0 md:border-r border-gray-200/50 bg-[#F8F9FA]/80 backdrop-blur-sm">
            
            <!-- 1. INTERACTIVE GRADIENT WHEEL -->
            <div class="relative group mt-10">
                <!-- Outer Ring Decoration -->
                <div class="absolute inset-0 rounded-full border border-gray-300 scale-110 opacity-50 pointer-events-none"></div>
                
                <!-- SVG Wheel Container -->
                <div id="wheel-container" class="relative w-72 h-72 z-20 drop-shadow-2xl">
                    <!-- SVG Injected via JS -->
                </div>

                <!-- Center Display (Donut Hole) -->
                <div class="absolute inset-0 m-auto w-24 h-24 bg-[#F8F9FA] rounded-full flex items-center justify-center border border-gray-100 shadow-inner z-30 pointer-events-none">
                     <div id="center-swatch" class="w-16 h-16 rounded-full bg-gray-200 transition-colors duration-500 border border-gray-200"></div>
                </div>

                <!-- 2. SEARCH TAG -->
                <div class="absolute top-1/2 -right-[140px] md:-right-[180px] -translate-y-1/2 flex items-center z-40 transform translate-x-4">
                    <div class="w-12 md:w-16 h-px bg-gray-800 relative">
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 w-1.5 h-1.5 bg-gray-800 rounded-full"></div>
                    </div>
                    
                    <div class="relative bg-white border border-gray-800 shadow-[4px_4px_0px_rgba(0,0,0,0.1)] transition-shadow duration-300 hover:shadow-[6px_6px_0px_rgba(0,0,0,0.1)]">
                        <div class="absolute -top-3 left-2 text-[9px] font-mono font-bold uppercase bg-gray-800 text-white px-1 py-0.5 tracking-wider">
                            Input_Spec
                        </div>
                        <div class="flex">
                            <input
                                type="text"
                                id="search-input"
                                placeholder="Peach, #FF00FF..."
                                class="w-32 h-10 px-3 text-xs font-mono bg-transparent border-none outline-none text-gray-900 placeholder-gray-400 uppercase"
                            />
                            <button
                                id="search-btn"
                                class="w-10 h-10 flex items-center justify-center border-l border-gray-100 bg-gray-50 hover:bg-gray-100 transition-colors"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Identity Block -->
            <div class="mt-12 text-center opacity-0 transition-opacity duration-700" id="identity-block">
                <h1 id="res-name" class="text-4xl lg:text-5xl font-black text-gray-900 tracking-tighter mb-2 capitalize">OMNISPEC</h1>
                <div class="inline-flex flex-col items-center">
                    <span id="res-hex" class="font-mono text-lg text-gray-500 border-b border-gray-300 pb-1 mb-1 select-all cursor-pointer hover:text-black">System Ready</span>
                    <span id="res-index" class="text-[10px] font-bold uppercase tracking-[0.2em] text-gray-400">INIT_SEQ_001</span>
                </div>
                <p class="text-[10px] text-gray-400 mt-4 max-w-[200px] mx-auto leading-relaxed">
                    * Interactive: Click any wheel segment to analyze that specific gradient step.
                </p>
            </div>

        </div>

        <!-- RIGHT PANEL: TECHNICAL CASE STUDY -->
        <div class="w-full md:w-7/12 lg:w-8/12 md:ml-auto p-8 md:p-16 lg:p-24 min-h-screen flex flex-col gap-12 opacity-0 translate-y-10 transition-all duration-1000" id="technical-panel">

            <!-- SECTION 1: CHROMATICS -->
            <section>
                <h2 class="text-sm font-bold uppercase tracking-widest text-gray-400 mb-6 technical-header">01 // Chromatics Report</h2>
                <div class="bg-white p-8 border border-gray-100 shadow-sm">
                    <p class="text-sm font-mono text-gray-500 mb-4">// SPECTRAL ANALYSIS</p>
                    <p id="desc-chromatics" class="text-gray-700 leading-relaxed text-lg max-w-prose">
                        Awaiting input.
                    </p>
                    
                    <div class="grid grid-cols-2 gap-6 mt-8 pt-8 border-t border-gray-100">
                        <div>
                            <span class="block text-[10px] uppercase text-gray-400 mb-1">RGB Values</span>
                            <span id="res-rgb" class="font-mono font-bold">---</span>
                        </div>
                        <div>
                            <span class="block text-[10px] uppercase text-gray-400 mb-1">HSL Coordinates</span>
                            <span id="res-hsl" class="font-mono font-bold">---</span>
                        </div>
                    </div>
                </div>
            </section>

             <!-- SECTION 2: HARMONY SPECTRUM (NEW) -->
             <section>
                <h2 class="text-sm font-bold uppercase tracking-widest text-gray-400 mb-6 technical-header">02 // Harmony Spectrum</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Complementary -->
                    <div class="bg-white p-6 border border-gray-100 shadow-sm group hover:border-gray-300 transition-colors cursor-pointer" id="card-comp">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="font-bold text-gray-800">Complementary</h3>
                            <span class="text-[10px] uppercase text-gray-400 font-mono">OPPOSITE_180°</span>
                        </div>
                        <div class="flex items-center gap-4">
                            <div id="swatch-comp" class="w-12 h-12 rounded-full border border-gray-200 shadow-inner"></div>
                            <div>
                                <p id="hex-comp" class="font-mono font-bold text-lg text-gray-700">#000000</p>
                                <p class="text-xs text-gray-400">High Contrast Pair</p>
                            </div>
                        </div>
                    </div>

                    <!-- Triadic -->
                    <div class="bg-white p-6 border border-gray-100 shadow-sm">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="font-bold text-gray-800">Triadic Split</h3>
                            <span class="text-[10px] uppercase text-gray-400 font-mono">SPLIT_120°</span>
                        </div>
                        <div class="flex gap-2">
                            <div id="swatch-tri-1" class="flex-1 h-12 rounded bg-gray-100 cursor-pointer hover:opacity-80 transition-opacity" title="Triad 1"></div>
                            <div id="swatch-tri-2" class="flex-1 h-12 rounded bg-gray-200 cursor-pointer hover:opacity-80 transition-opacity" title="Triad 2"></div>
                        </div>
                        <div class="flex justify-between mt-2 font-mono text-xs text-gray-500">
                            <span id="hex-tri-1">---</span>
                            <span id="hex-tri-2">---</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION 3: PSYCHOLOGY -->
            <section>
                <h2 class="text-sm font-bold uppercase tracking-widest text-gray-400 mb-6 technical-header">03 // Psychological Profile</h2>
                <div class="bg-gray-900 text-gray-300 p-8 shadow-2xl relative overflow-hidden rounded-sm">
                    <div class="absolute top-0 right-0 p-4 opacity-10">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-32 w-32" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-3">
                        <span id="mood-tag" class="text-xs border border-white/30 px-2 py-1 rounded-full uppercase tracking-wider">Neutral</span>
                    </h3>
                    <p id="desc-psychology" class="leading-relaxed border-l-2 border-white/20 pl-4">
                        Analysis pending.
                    </p>
                </div>
            </section>

            <!-- SECTION 4: INDUSTRY & A11Y -->
            <section>
                <h2 class="text-sm font-bold uppercase tracking-widest text-gray-400 mb-6 technical-header">04 // Technical Case Study</h2>
                <div class="grid grid-cols-1 gap-6">
                    <div class="bg-white border-l-4 border-gray-900 p-6 shadow-sm">
                        <h4 class="font-bold text-gray-900 mb-2">Usage Context</h4>
                        <p id="desc-usage" class="text-gray-600 text-sm leading-relaxed">No data available.</p>
                    </div>
                    <div class="bg-white border-l-4 border-gray-300 p-6 shadow-sm">
                        <h4 class="font-bold text-gray-900 mb-2">Accessibility Audit (WCAG)</h4>
                        <div class="flex items-center gap-4 mb-3">
                             <span id="badge-contrast" class="px-3 py-1 bg-gray-100 text-gray-600 text-xs font-bold uppercase rounded">Unknown</span>
                        </div>
                        <p id="desc-a11y" class="text-gray-600 text-sm leading-relaxed">Contrast ratios determine the legibility of text against this color background.</p>
                    </div>
                </div>
            </section>

        </div>
    </div>

    <!-- LOGIC ENGINE -->
    <script>
        // --- COLOR UTILITIES ---
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        function rgbToHsl(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            const max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h = 0, s, l = (max + min) / 2;
            if (max === min) h = s = 0; 
            else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
            return { h: h * 360, s, l };
        }

        function hslToHex(h, s, l) {
            l /= 100;
            const a = s * Math.min(l, 1 - l) / 100;
            const f = (n) => {
                const k = (n + h / 30) % 12;
                const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
                return Math.round(255 * color).toString(16).padStart(2, '0');
            };
            return `#${f(0)}${f(8)}${f(4)}`;
        }

        function getComplementary(hex) {
            const rgb = hexToRgb(hex);
            if (!rgb) return '#000000';
            const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
            return hslToHex((hsl.h + 180) % 360, hsl.s * 100, hsl.l * 100);
        }

        function getTriadic(hex) {
            const rgb = hexToRgb(hex);
            if (!rgb) return ['#000000', '#000000'];
            const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
            return [
                hslToHex((hsl.h + 120) % 360, hsl.s * 100, hsl.l * 100),
                hslToHex((hsl.h + 240) % 360, hsl.s * 100, hsl.l * 100)
            ];
        }

        function generateGradientSteps(hex) {
            const rgb = hexToRgb(hex);
            if(!rgb) return [];
            const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
            let steps = [];
            // Generate 8 steps of lightness from 15% to 85%
            for(let i=0; i<8; i++) {
                const l = 15 + (i * 10); 
                steps.push(hslToHex(hsl.h, hsl.s * 100, l));
            }
            return steps;
        }

        function getLuminance(r, g, b) {
            const a = [r, g, b].map(v => {
                v /= 255;
                return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
            });
            return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;
        }

        function getBestTextColor(hex) {
            const rgb = hexToRgb(hex);
            if (!rgb) return 'black';
            const lum = getLuminance(rgb.r, rgb.g, rgb.b);
            return lum > 0.179 ? 'black' : 'white';
        }

        // --- TECHNICAL TEXT GENERATION ---
        function generateTechnicalText(data) {
            const rgb = hexToRgb(data.hex);
            const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
            
            // Chromatics
            let chromText = `The sample identified as ${data.name} presents a hexadecimal value of ${data.hex}. `;
            if (hsl.s > 0.7) chromText += `High saturation (${Math.round(hsl.s*100)}%) indicates a vibrant spectral intensity suited for focal points. `;
            else if (hsl.s < 0.2) chromText += `Low saturation (${Math.round(hsl.s*100)}%) places this in neutral territory, acting as a passive structural element. `;
            
            // Psychology
            let psychMood = "Neutral";
            let psychDesc = "Balanced and unobtrusive.";
            const h = hsl.h;
            
            if (h >= 340 || h < 20) {
                psychMood = "Dynamic / Urgent";
                psychDesc = "Red wavelengths stimulate the autonomic nervous system. Used to compel action or signify importance.";
            } else if (h >= 20 && h < 50) {
                psychMood = "Energetic / Friendly";
                psychDesc = "Orange/Yellow frequencies evoke warmth and sociability. Used for caution or creative highlighting.";
            } else if (h >= 50 && h < 160) {
                psychMood = "Restorative / Stable";
                psychDesc = "Green spectrums are easiest on the eye, promoting cognitive restoration. Ideal for stability.";
            } else if (h >= 160 && h < 260) {
                psychMood = "Professional / Trust";
                psychDesc = "Blue wavelengths lower blood pressure and aid focus. Standard for corporate integrity.";
            } else if (h >= 260 && h < 340) {
                psychMood = "Luxury / Creative";
                psychDesc = "Purple suggests rarity and creativity, combining stimulation with stability.";
            }

            // Usage
            const contrast = data.contrastText === 'black' ? "High light reflectance." : "Low light reflectance.";
            const a11yDesc = `The calculated contrast ratio necessitates ${data.contrastText === 'black' ? 'dark' : 'light'} typography for WCAG AA compliance. ${contrast}`;
            const usageDesc = `Recommended for ${hsl.s > 0.5 ? 'accents, calls-to-action, and branding highlights' : 'backgrounds, foundations, and structural division'}.`;

            return { chromatics: chromText, mood: psychMood, psychDesc, usage: usageDesc, a11y: a11yDesc };
        }

        // --- CORE PROCESSOR ---
        function validateAndProcessColor(rawInput) {
            const div = document.createElement('div');
            div.style.color = rawInput;
            div.style.display = 'none';
            document.body.appendChild(div);

            const computedStyle = window.getComputedStyle(div);
            const rgbString = computedStyle.color;
            const isValid = div.style.color !== '';
            document.body.removeChild(div);

            if (!isValid) return null;

            let hex = '#000000';
            const rgbMatch = rgbString.match(/\d+/g);
            if (rgbMatch) {
                hex = '#' + rgbMatch.map(x => {
                    const hexPart = parseInt(x).toString(16);
                    return hexPart.length === 1 ? '0' + hexPart : hexPart;
                }).join('').toUpperCase();
            }

            // Generate Data
            const contrastText = getBestTextColor(hex);
            const gradientSteps = generateGradientSteps(hex);
            const complementary = getComplementary(hex);
            const triadic = getTriadic(hex);
            
            // Format Name (if hex input, keep hex, else capitalize name)
            const isHexInput = rawInput.trim().startsWith('#');
            const name = isHexInput ? hex : rawInput.charAt(0).toUpperCase() + rawInput.slice(1);
            
            const [r,g,b] = rgbMatch.map(Number);
            const hsl = rgbToHsl(r,g,b);

            const texts = generateTechnicalText({name, hex});

            return { 
                name, hex, rgb: rgbString, 
                hsl: `H:${Math.round(hsl.h)}° S:${Math.round(hsl.s*100)}% L:${Math.round(hsl.l*100)}%`,
                gradientSteps, complementary, triadic, contrastText, texts 
            };
        }

        // --- UI CONTROLLER ---
        const searchInput = document.getElementById('search-input');
        const searchBtn = document.getElementById('search-btn');
        const wheelContainer = document.getElementById('wheel-container');
        const centerSwatch = document.getElementById('center-swatch');
        
        // Output Elements
        const identityBlock = document.getElementById('identity-block');
        const technicalPanel = document.getElementById('technical-panel');
        
        const elName = document.getElementById('res-name');
        const elHex = document.getElementById('res-hex');
        const elIndex = document.getElementById('res-index');
        const elRgb = document.getElementById('res-rgb');
        const elHsl = document.getElementById('res-hsl');
        const elDescChrom = document.getElementById('desc-chromatics');
        const elMoodTag = document.getElementById('mood-tag');
        const elDescPsych = document.getElementById('desc-psychology');
        const elDescUsage = document.getElementById('desc-usage');
        const elBadgeContrast = document.getElementById('badge-contrast');
        const elDescA11y = document.getElementById('desc-a11y');

        // Harmony Elements
        const swatchComp = document.getElementById('swatch-comp');
        const hexComp = document.getElementById('hex-comp');
        const cardComp = document.getElementById('card-comp');
        const swatchTri1 = document.getElementById('swatch-tri-1');
        const swatchTri2 = document.getElementById('swatch-tri-2');
        const hexTri1 = document.getElementById('hex-tri-1');
        const hexTri2 = document.getElementById('hex-tri-2');

        // Render Interactive SVG Wheel
        function renderWheel(steps) {
            const size = 288; // w-72 = 18rem = 288px
            const cx = size / 2;
            const cy = size / 2;
            const radius = 140; // slightly smaller than container
            const numSegments = steps.length;
            
            let svgHtml = `<svg width="${size}" height="${size}" viewBox="0 0 ${size} ${size}" class="w-full h-full transform -rotate-90">`;
            
            steps.forEach((color, i) => {
                const startAngle = (i * 360) / numSegments;
                const endAngle = ((i + 1) * 360) / numSegments;
                
                // Convert polar to cartesian
                const startRad = (startAngle * Math.PI) / 180;
                const endRad = (endAngle * Math.PI) / 180;
                
                const x1 = cx + radius * Math.cos(startRad);
                const y1 = cy + radius * Math.sin(startRad);
                const x2 = cx + radius * Math.cos(endRad);
                const y2 = cy + radius * Math.sin(endRad);
                
                // SVG Path for pie slice (Move center, Line start, Arc end, Line center)
                const d = `M${cx},${cy} L${x1},${y1} A${radius},${radius} 0 0,1 ${x2},${y2} Z`;
                
                svgHtml += `<path d="${d}" fill="${color}" stroke="white" stroke-width="2" class="wheel-segment" onclick="handleSegmentClick('${color}')" />`;
            });
            
            svgHtml += `</svg>`;
            wheelContainer.innerHTML = svgHtml;
        }

        // Global handler for segment click
        window.handleSegmentClick = (color) => {
            const result = validateAndProcessColor(color);
            if(result) updateUI(result);
        };
        
        // Add click handler for complementary card to "diagnose" that color
        cardComp.addEventListener('click', () => {
            const hex = hexComp.textContent;
            window.handleSegmentClick(hex);
        });
        
        // Add click handlers for triadic
        swatchTri1.addEventListener('click', () => window.handleSegmentClick(hexTri1.textContent));
        swatchTri2.addEventListener('click', () => window.handleSegmentClick(hexTri2.textContent));

        function updateUI(data) {
            // 1. Render SVG Wheel
            renderWheel(data.gradientSteps);
            centerSwatch.style.backgroundColor = data.hex;

            // 2. Reveal Sections
            identityBlock.classList.remove('opacity-0');
            technicalPanel.classList.remove('opacity-0', 'translate-y-10');

            // 3. Update Text
            elName.textContent = data.name;
            elHex.textContent = data.hex;
            const idx = data.hex.replace('#', '').substring(0, 3).toUpperCase();
            elIndex.textContent = `REF_${idx}_${new Date().getFullYear()}`;

            elRgb.textContent = data.rgb;
            elHsl.textContent = data.hsl;
            elDescChrom.textContent = data.texts.chromatics;

            elMoodTag.textContent = data.texts.mood;
            elDescPsych.textContent = data.texts.psychDesc;
            
            elDescUsage.textContent = data.texts.usage;
            
            const contrastLabel = data.contrastText === 'black' ? 'Safe: Dark Text' : 'Safe: Light Text';
            elBadgeContrast.textContent = contrastLabel;
            elBadgeContrast.className = `px-3 py-1 text-xs font-bold uppercase rounded ${data.contrastText === 'black' ? 'bg-gray-200 text-gray-900' : 'bg-gray-900 text-white'}`;
            elDescA11y.textContent = data.texts.a11y;

            // 4. Update Harmony
            swatchComp.style.backgroundColor = data.complementary;
            hexComp.textContent = data.complementary;

            swatchTri1.style.backgroundColor = data.triadic[0];
            swatchTri2.style.backgroundColor = data.triadic[1];
            hexTri1.textContent = data.triadic[0];
            hexTri2.textContent = data.triadic[1];
        }

        function handleSearch() {
            const query = searchInput.value.trim();
            if (!query) return;

            const result = validateAndProcessColor(query);
            if (result) {
                updateUI(result);
                searchInput.value = '';
            } else {
                searchInput.parentElement.classList.add('animate-pulse', 'border-red-500');
                setTimeout(() => searchInput.parentElement.classList.remove('animate-pulse', 'border-red-500'), 500);
            }
        }

        searchBtn.addEventListener('click', handleSearch);
        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') handleSearch();
        });

    </script>
</body>

</html>
